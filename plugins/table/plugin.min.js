!function(a,b){"use strict";function d(a,b){for(var d,e=[],f=0;f<a.length;++f){if(d=c[a[f]]||g(a[f]),!d)throw"module definition dependecy not found: "+a[f];e.push(d)}b.apply(null,e)}function e(a,e,f){if("string"!=typeof a)throw"invalid module definition, module id must be defined and be a string";if(e===b)throw"invalid module definition, dependencies must be specified";if(f===b)throw"invalid module definition, definition function must be specified";d(e,function(){c[a]=f.apply(null,arguments)})}function g(b){for(var c=a,d=b.split(/[.\/]/),e=0;e<d.length;++e){if(!c[d[e]])return;c=c[d[e]]}return c}function h(d){for(var e=0;e<d.length;e++){for(var f=a,g=d[e],h=g.split(/[.\/]/),i=0;i<h.length-1;++i)f[h[i]]===b&&(f[h[i]]={}),f=f[h[i]];f[h[h.length-1]]=c[g]}}var c={};e("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(a,b){function d(a,b){return parseInt(a.getAttribute(b)||1,10)}var c=a.each;return function(e,f){function m(){var a=0;g=[],c(["thead","tbody","tfoot"],function(b){var e=l.select("> "+b+" tr",f);c(e,function(e,f){f+=a,c(l.select("> td, > th",e),function(a,c){var e,h,i,j;if(g[f])for(;g[f][c];)c++;for(i=d(a,"rowspan"),j=d(a,"colspan"),h=f;f+i>h;h++)for(g[h]||(g[h]=[]),e=c;c+j>e;e++)g[h][e]={part:b,real:h==f&&e==c,elm:a,rowspan:i,colspan:j}})}),a+=e.length})}function n(a,b){return a=a.cloneNode(b),a.removeAttribute("id"),a}function o(a,b){var c;return c=g[b],c?c[a]:void 0}function p(a,b,c){a&&(c=parseInt(c,10),1===c?a.removeAttribute(b,1):a.setAttribute(b,c,1))}function q(a){return a&&(l.hasClass(a.elm,"mce-item-selected")||a==j)}function r(){var a=[];return c(f.rows,function(b){c(b.cells,function(c){return l.hasClass(c,"mce-item-selected")||c==j.elm?(a.push(b),!1):void 0})}),a}function s(){var a=l.createRng();a.setStartAfter(f),a.setEndAfter(f),k.setRng(a),l.remove(f)}function t(d){var f,g={};return e.settings.table_clone_elements!==!1&&(g=a.makeMap((e.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),a.walk(d,function(a){var e;return 3==a.nodeType?(c(l.getParents(a.parentNode,null,d).reverse(),function(a){g[a.nodeName]&&(a=n(a,!1),f?e&&e.appendChild(a):f=e=a,e=a)}),e&&(e.innerHTML=b.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),d=n(d,!1),p(d,"rowSpan",1),p(d,"colSpan",1),f?d.appendChild(f):b.ie||(d.innerHTML='<br data-mce-bogus="1" />'),d}function u(){var b,a=l.createRng();return c(l.select("tr",f),function(a){0===a.cells.length&&l.remove(a)}),0===l.select("tr",f).length?(a.setStartBefore(f),a.setEndBefore(f),k.setRng(a),l.remove(f),void 0):(c(l.select("thead,tbody,tfoot",f),function(a){0===a.rows.length&&l.remove(a)}),m(),b=g[Math.min(g.length-1,h.y)],b&&(k.select(b[Math.min(b.length-1,h.x)].elm,!0),k.collapse(!0)),void 0)}function v(a,b,c,d){var e,f,h,i,j;for(e=g[b][a].elm.parentNode,h=1;c>=h;h++)if(e=l.getNext(e,"tr")){for(f=a;f>=0;f--)if(j=g[b+h][f].elm,j.parentNode==e){for(i=1;d>=i;i++)l.insertAfter(t(j),j);break}if(-1==f)for(i=1;d>=i;i++)e.insertBefore(t(e.cells[0]),e.cells[0])}}function w(){c(g,function(a,b){c(a,function(a,c){var e,f,g;if(q(a)&&(a=a.elm,e=d(a,"colspan"),f=d(a,"rowspan"),e>1||f>1)){for(p(a,"rowSpan",1),p(a,"colSpan",1),g=0;e-1>g;g++)l.insertAfter(t(a),a);v(c,b,f-1,e)}})})}function x(b,d,e){var f,j,k,n,r,s,t,v,x,y,z;if(b?(f=F(b),j=f.x,k=f.y,n=j+(d-1),r=k+(e-1)):(h=i=null,c(g,function(a,b){c(a,function(a,c){q(a)&&(h||(h={x:c,y:b}),i={x:c,y:b})})}),j=h.x,k=h.y,n=i.x,r=i.y),v=o(j,k),x=o(n,r),v&&x&&v.part==x.part){for(w(),m(),v=o(j,k).elm,p(v,"colSpan",n-j+1),p(v,"rowSpan",r-k+1),t=k;r>=t;t++)for(s=j;n>=s;s++)g[t]&&g[t][s]&&(b=g[t][s].elm,b!=v&&(y=a.grep(b.childNodes),c(y,function(a){v.appendChild(a)}),y.length&&(y=a.grep(v.childNodes),z=0,c(y,function(a){"BR"==a.nodeName&&l.getAttrib(a,"data-mce-bogus")&&z++<y.length-1&&v.removeChild(a)})),l.remove(b)));u()}}function y(a){var b,e,f,h,i,j,k,m,o;for(c(g,function(d,e){return c(d,function(c){return q(c)&&(c=c.elm,i=c.parentNode,j=n(i,!1),b=e,a)?!1:void 0}),a?!b:void 0}),h=0;h<g[0].length;h++)if(g[b][h]&&(e=g[b][h].elm,e!=f)){if(a){if(b>0&&g[b-1][h]&&(m=g[b-1][h].elm,o=d(m,"rowSpan"),o>1)){p(m,"rowSpan",o+1);continue}}else if(o=d(e,"rowspan"),o>1){p(e,"rowSpan",o+1);continue}k=t(e),p(k,"colSpan",e.colSpan),j.appendChild(k),f=e}j.hasChildNodes()&&(a?i.parentNode.insertBefore(j,i):l.insertAfter(j,i))}function z(a){var b,e;c(g,function(d){return c(d,function(c,d){return q(c)&&(b=d,a)?!1:void 0}),a?!b:void 0}),c(g,function(c,f){var g,h,i;c[b]&&(g=c[b].elm,g!=e&&(i=d(g,"colspan"),h=d(g,"rowspan"),1==i?a?(g.parentNode.insertBefore(t(g),g),v(b,f,h-1,i)):(l.insertAfter(t(g),g),v(b,f,h-1,i)):p(g,"colSpan",g.colSpan+1),e=g))})}function A(){var b=[];c(g,function(e){c(e,function(e,f){q(e)&&-1===a.inArray(b,f)&&(c(g,function(a){var c,b=a[f].elm;c=d(b,"colSpan"),c>1?p(b,"colSpan",c-1):l.remove(b)}),b.push(f))})}),u()}function B(){function b(a){var b,e,f;b=l.getNext(a,"tr"),c(a.cells,function(a){var b=d(a,"rowSpan");b>1&&(p(a,"rowSpan",b-1),e=F(a),v(e.x,e.y,1,1))}),e=F(a.cells[0]),c(g[e.y],function(a){var b;a=a.elm,a!=f&&(b=d(a,"rowSpan"),1>=b?l.remove(a):p(a,"rowSpan",b-1),f=a)})}var a;a=r(),c(a.reverse(),function(a){b(a)}),u()}function C(){var a=r();return l.remove(a),u(),a}function D(){var a=r();return c(a,function(b,c){a[c]=n(b,!0)}),a}function E(a,b){var d=r(),e=d[b?0:d.length-1],f=e.cells.length;a&&(c(g,function(a){var b;return f=0,c(a,function(a){a.real&&(f+=a.colspan),a.elm.parentNode==e&&(b=1)}),b?!1:void 0}),b||a.reverse(),c(a,function(a){var c,g,d=a.cells.length;for(c=0;d>c;c++)g=a.cells[c],p(g,"colSpan",1),p(g,"rowSpan",1);for(c=d;f>c;c++)a.appendChild(t(a.cells[d-1]));for(c=f;d>c;c++)l.remove(a.cells[c]);b?e.parentNode.insertBefore(a,e):l.insertAfter(a,e)}),l.removeClass(l.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function F(a){var b;return c(g,function(d,e){return c(d,function(c,d){return c.elm==a?(b={x:d,y:e},!1):void 0}),!b}),b}function G(a){h=F(a)}function H(){var a,b;return a=b=0,c(g,function(d,e){c(d,function(c,d){var f,h;q(c)&&(c=g[e][d],d>a&&(a=d),e>b&&(b=e),c.real&&(f=c.colspan-1,h=c.rowspan-1,f&&d+f>a&&(a=d+f),h&&e+h>b&&(b=e+h)))})}),{x:a,y:b}}function I(a){var b,c,d,e,f,j,k,m,n,o;if(i=F(a),h&&i){for(b=Math.min(h.x,i.x),c=Math.min(h.y,i.y),d=Math.max(h.x,i.x),e=Math.max(h.y,i.y),f=d,j=e,o=c;j>=o;o++)a=g[o][b],a.real||b-(a.colspan-1)<b&&(b-=a.colspan-1);for(n=b;f>=n;n++)a=g[c][n],a.real||c-(a.rowspan-1)<c&&(c-=a.rowspan-1);for(o=c;e>=o;o++)for(n=b;d>=n;n++)a=g[o][n],a.real&&(k=a.colspan-1,m=a.rowspan-1,k&&n+k>f&&(f=n+k),m&&o+m>j&&(j=o+m));for(l.removeClass(l.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),o=c;j>=o;o++)for(n=b;f>=n;n++)g[o][n]&&l.addClass(g[o][n].elm,"mce-item-selected")}}var g,h,i,j,k=e.selection,l=k.dom;f=f||l.getParent(k.getStart(),"table"),m(),j=l.getParent(k.getStart(),"th,td"),j&&(h=F(j),i=H(),j=o(h.x,h.y)),a.extend(this,{deleteTable:s,split:w,merge:x,insertRow:y,insertCol:z,deleteCols:A,deleteRows:B,cutRows:C,copyRows:D,pasteRows:E,getPos:F,setStartCell:G,setEndCell:I})}}),e("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(a,b,c){function e(a,b){return parseInt(a.getAttribute(b)||1,10)}var d=c.each;return function(c){function f(){function b(b){function g(a,d){var e=a?"previousSibling":"nextSibling",f=c.dom.getParent(d,"tr"),g=f[e];if(g)return r(c,d,g,a),b.preventDefault(),!0;var i=c.dom.getParent(f,"table"),l=f.parentNode,m=l.nodeName.toLowerCase();if("tbody"===m||m===(a?"tfoot":"thead")){var n=h(a,i,l,"tbody");if(null!==n)return j(a,n,d)}return k(a,f,e,i)}function h(a,b,d,e){var f=c.dom.select(">"+e,b),g=f.indexOf(d);if(a&&0===g||!a&&g===f.length-1)return i(a,b);if(-1===g){var h="thead"===d.tagName.toLowerCase()?0:f.length-1;return f[h]}return f[g+(a?-1:1)]}function i(a,b){var d=a?"thead":"tfoot",e=c.dom.select(">"+d,b);return 0!==e.length?e[0]:null}function j(a,d,e){var f=l(d,a);return f&&r(c,e,f,a),b.preventDefault(),!0}function k(a,d,e,f){var h=f[e];if(h)return m(h),!0;var i=c.dom.getParent(f,"td,th");if(i)return g(a,i,b);var j=l(d,!a);return m(j),b.preventDefault(),!1}function l(a,b){var d=a&&a[b?"lastChild":"firstChild"];return d&&"BR"===d.nodeName?c.dom.getParent(d,"td,th"):d}function m(a){c.selection.setCursorLocation(a,0)}function n(){return f==a.UP||f==a.DOWN}function o(a){var b=a.selection.getNode(),c=a.dom.getParent(b,"tr");return null!==c}function p(a){for(var b=0,c=a;c.previousSibling;)c=c.previousSibling,b+=e(c,"colspan");return b}function q(a,b){var c=0,f=0;return d(a.children,function(a,d){return c+=e(a,"colspan"),f=d,c>b?!1:void 0}),f}function r(a,b,d,e){var f=p(c.dom.getParent(b,"td,th")),g=q(d,f),h=d.childNodes[g],i=l(h,e);m(i||h)}function s(a){var b=c.selection.getNode(),d=c.dom.getParent(b,"td,th"),e=c.dom.getParent(a,"td,th");return d&&d!==e&&t(d,e)}function t(a,b){return c.dom.getParent(a,"TABLE")===c.dom.getParent(b,"TABLE")}var f=b.keyCode;if(n()&&o(c)){var u=c.selection.getNode();setTimeout(function(){s(u)&&g(!b.shiftKey&&f===a.UP,u,b)},0)}}c.on("KeyDown",function(a){b(a)})}function g(){function a(a,b){var e,c=b.ownerDocument,d=c.createRange();return d.setStartBefore(b),d.setEnd(a.endContainer,a.endOffset),e=c.createElement("body"),e.appendChild(d.cloneContents()),0===e.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}c.on("KeyDown",function(b){var d,e,f=c.dom;(37==b.keyCode||38==b.keyCode)&&(d=c.selection.getRng(),e=f.getParent(d.startContainer,"table"),e&&c.getBody().firstChild==e&&a(d,e)&&(d=f.createRng(),d.setStartBefore(e),d.setEndBefore(e),c.selection.setRng(d),b.preventDefault()))})}function h(){c.on("KeyDown SetContent VisualAid",function(){var a;for(a=c.getBody().lastChild;a;a=a.previousSibling)if(3==a.nodeType){if(a.nodeValue.length>0)break}else if(1==a.nodeType&&!a.getAttribute("data-mce-bogus"))break;a&&"TABLE"==a.nodeName&&(c.settings.forced_root_block?c.dom.add(c.getBody(),c.settings.forced_root_block,c.settings.forced_root_block_attrs,b.ie&&b.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):c.dom.add(c.getBody(),"br",{"data-mce-bogus":"1"}))}),c.on("PreProcess",function(a){var b=a.node.lastChild;b&&("BR"==b.nodeName||1==b.childNodes.length&&("BR"==b.firstChild.nodeName||"\xa0"==b.firstChild.nodeValue))&&b.previousSibling&&"TABLE"==b.previousSibling.nodeName&&c.dom.remove(b)})}function i(){function a(a,b,c,d){var g,h,i,e=3,f=a.dom.getParent(b.startContainer,"TABLE");return f&&(g=f.parentNode),h=b.startContainer.nodeType==e&&0===b.startOffset&&0===b.endOffset&&d&&("TR"==c.nodeName||c==g),i=("TD"==c.nodeName||"TH"==c.nodeName)&&!d,h||i}function b(){var b=c.selection.getRng(),d=c.selection.getNode(),e=c.dom.getParent(b.startContainer,"TD,TH");if(a(c,b,d,e)){e||(e=d);for(var f=e.lastChild;f.lastChild;)f=f.lastChild;b.setEnd(f,f.nodeValue.length),c.selection.setRng(b)}}c.on("KeyDown",function(){b()}),c.on("MouseDown",function(a){2!=a.button&&b()})}function j(){c.on("keydown",function(b){if((b.keyCode==a.DELETE||b.keyCode==a.BACKSPACE)&&!b.isDefaultPrevented()){var d=c.dom.getParent(c.selection.getStart(),"table");if(d){for(var e=c.dom.select("td,th",d),f=e.length;f--;)if(!c.dom.hasClass(e[f],"mce-item-selected"))return;b.preventDefault(),c.execCommand("mceTableDelete")}}})}j(),b.webkit&&(f(),i()),b.gecko&&(g(),h()),b.ie>10&&(g(),h())}}),e("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(a,b,c){return function(d){function j(){d.getBody().style.webkitUserSelect="",i&&(d.dom.removeClass(d.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),i=!1)}function k(b){var c,j,k=b.target;if(g&&(f||k!=g)&&("TD"==k.nodeName||"TH"==k.nodeName)){j=e.getParent(k,"table"),j==h&&(f||(f=new a(d,j),f.setStartCell(g),d.getBody().style.webkitUserSelect="none"),f.setEndCell(k),i=!0),c=d.selection.getSel();try{c.removeAllRanges?c.removeAllRanges():c.empty()}catch(l){}b.preventDefault()}}var f,g,h,e=d.dom,i=!0;return d.on("MouseDown",function(a){2!=a.button&&(j(),g=e.getParent(a.target,"td,th"),h=e.getParent(g,"table"))}),e.bind(d.getDoc(),"mouseover",k),d.on("remove",function(){e.unbind(d.getDoc(),"mouseover",k)}),d.on("MouseUp",function(){function o(d,e){var f=new b(d,d);do{if(3==d.nodeType&&0!==c.trim(d.nodeValue).length)return e?a.setStart(d,0):a.setEnd(d,d.nodeValue.length),void 0;if("BR"==d.nodeName)return e?a.setStartBefore(d):a.setEndBefore(d),void 0}while(d=e?f.next():f.prev())}var a,j,k,l,m,n,i=d.selection;if(g){if(f&&(d.getBody().style.webkitUserSelect=""),j=e.select("td.mce-item-selected,th.mce-item-selected"),j.length>0){a=e.createRng(),l=j[0],n=j[j.length-1],a.setStartBefore(l),a.setEndAfter(l),o(l,1),k=new b(l,e.getParent(j[0],"table"));do if("TD"==l.nodeName||"TH"==l.nodeName){if(!e.hasClass(l,"mce-item-selected"))break;m=l}while(l=k.next());o(m),i.setRng(a)}d.nodeChanged(),g=f=h=null}}),d.on("KeyUp",function(){j()}),{clear:j}}}),e("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(a,b,c,d,e,f,g){function i(d){function j(a){return a?a.replace(/px$/,""):""}function k(a){return/^[0-9]+$/.test(a)&&(a+="px"),a}function l(a){h("left center right".split(" "),function(b){d.formatter.remove("align"+b,{},a)})}function m(){var b,c,a=d.dom;b=a.getParent(d.selection.getStart(),"table"),c={width:j(a.getStyle(b,"width")||a.getAttrib(b,"width")),height:j(a.getStyle(b,"height")||a.getAttrib(b,"height")),cellspacing:a.getAttrib(b,"cellspacing"),cellpadding:a.getAttrib(b,"cellpadding"),border:a.getAttrib(b,"border"),caption:!!a.select("caption",b)[0]},h("left center right".split(" "),function(a){d.formatter.matchNode(b,"align"+a)&&(c.align=a)}),d.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:c,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var e,c=this.toJSON();d.undoManager.transact(function(){d.dom.setAttribs(b,{cellspacing:c.cellspacing,cellpadding:c.cellpadding,border:c.border}),d.dom.setStyles(b,{width:k(c.width),height:k(c.height)}),e=a.select("caption",b)[0],e&&!c.caption&&a.remove(e),!e&&c.caption&&(e=a.create("caption"),e.innerHTML=f.ie?"\xa0":'<br data-mce-bogus="1"/>',b.insertBefore(e,b.firstChild)),l(b),c.align&&d.formatter.apply("align"+c.align,{},b),d.focus(),d.addVisual()})}})}function n(a,b){d.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var c=this.toJSON();d.undoManager.transact(function(){a.merge(b,c.cols,c.rows)})}})}function o(){var a,c,b=[];for(c=d.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Brown","C0C0C0","Silver","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum","FFFFFF","White"],a=0;a<c.length;a+=2)b.push({text:c[a+1],color:c[a]});return b}function p(){var b,c,e,f,g,h,i,j,k,a=this;for(b=o(),e='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="presentation" cellspacing="0"><tbody>',f=b.length-1,g=d.settings.textcolor_rows||5,h=d.settings.textcolor_cols||8,j=0;g>j;j++){for(e+="<tr>",i=0;h>i;i++)k=j*h+i,k>f?e+="<td></td>":(c=b[k],e+='<td><div id="'+a._id+"-"+k+'"'+' data-mce-color="'+c.color+'"'+' role="option"'+' tabIndex="-1"'+' style="'+(c?"background-color: #"+c.color:"")+'"'+' title="'+c.text+'">'+"</div>"+"</td>");e+="</tr>"}return e+="</tbody></table>"}function q(){var b,c,a=d.dom,e=[];e=d.dom.select("td.mce-item-selected,th.mce-item-selected"),b=d.dom.getParent(d.selection.getStart(),"td,th"),!e.length&&b&&e.push(b),b=b||e[0],c={width:j(a.getStyle(b,"width")||a.getAttrib(b,"width")),height:j(a.getStyle(b,"height")||a.getAttrib(b,"height")),background:a.toHex(a.getStyle(b,"background-color")),border:a.toHex(a.getStyle(b,"border-color")),valign:a.getStyle(b,"vertical-align"),scope:a.getAttrib(b,"scope")},c.type=b.nodeName.toLowerCase(),h("left center right".split(" "),function(a){d.formatter.matchNode(b,"align"+a)&&(c.align=a)});var f={type:"floatpanel",popover:!0,autohide:!0,html:p,onclick:function(a){var c,b=this.parent();(c=a.target.getAttribute("data-mce-color"))&&(this.hide(),c="#"+c,b.value(c))}};d.windowManager.open({title:"Cell properties",items:{type:"form",data:c,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Vertical alignment",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]},{label:"Background color",name:"background",type:"combobox",minWidth:90,maxWidth:null,tooltip:"Background color",menu:f},{label:"Border color",name:"border",type:"combobox",minWidth:90,maxWidth:null,tooltip:"Border color",menu:f}]},onsubmit:function(){var b=this.toJSON();d.undoManager.transact(function(){h(e,function(c){d.dom.setAttrib(c,"scope",b.scope),d.dom.setStyles(c,{width:k(b.width),height:k(b.height),"background-color":b.background,"border-color":b.border,"vertical-align":b.valign}),b.type&&c.nodeName.toLowerCase()!=b.type&&(c=a.rename(c,b.type)),l(c),b.align&&d.formatter.apply("align"+b.align,{},c)}),d.focus()})}})}function r(){var b,c,e,f,a=d.dom,g=[];b=d.dom.getParent(d.selection.getStart(),"table"),c=d.dom.getParent(d.selection.getStart(),"td,th"),h(b.rows,function(b){h(b.cells,function(d){return a.hasClass(d,"mce-item-selected")||d==c?(g.push(b),!1):void 0})}),e=g[0],f={height:j(a.getStyle(e,"height")||a.getAttrib(e,"height")),scope:a.getAttrib(e,"scope")},f.type=e.parentNode.nodeName.toLowerCase(),h("left center right".split(" "),function(a){d.formatter.matchNode(e,"align"+a)&&(f.align=a)}),d.windowManager.open({title:"Row properties",items:{type:"form",data:f,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,menu:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,menu:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var c,e,f,b=this.toJSON();d.undoManager.transact(function(){var i=b.type;h(g,function(g){d.dom.setAttrib(g,"scope",b.scope),d.dom.setStyles(g,{height:k(b.height)}),i!=g.parentNode.nodeName.toLowerCase()&&(c=a.getParent(g,"table"),e=g.parentNode,f=a.select(i,c)[0],f||(f=a.create(i),c.firstChild?c.insertBefore(f,c.firstChild):c.appendChild(f)),f.appendChild(g),e.hasChildNodes()||a.remove(e)),l(g),b.align&&d.formatter.apply("align"+b.align,{},g)}),d.focus()})}})}function s(a){return function(){d.execCommand(a)}}function t(a,b){var c,e,g;for(g="<table><tbody>",c=0;b>c;c++){for(g+="<tr>",e=0;a>e;e++)g+="<td>"+(f.ie?" ":"<br>")+"</td>";g+="</tr>"}g+="</tbody></table>",d.insertContent(g)}function u(a,b){function c(){a.disabled(!d.dom.getParent(d.selection.getStart(),b)),d.selection.selectorChanged(b,function(b){a.disabled(!b)})}d.initialized?c():d.on("init",c)}function v(){u(this,"table")}function w(){u(this,"td,th")}function x(){var a="";a='<table role="presentation" class="mce-grid mce-grid-border">';for(var b=0;10>b;b++){a+="<tr>";for(var c=0;10>c;c++)a+='<td><a href="#" data-mce-index="'+c+","+b+'"></a></td>';a+="</tr>"}return a+="</table>",a+='<div class="mce-text-center">0 x 0</div>'}var e,g,i=this;d.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onhide:function(){d.dom.removeClass(this.menu.items()[0].getEl().getElementsByTagName("a"),"mce-active")},menu:[{type:"container",html:x(),onmousemove:function(a){var b,c,e=a.target;if("A"==e.nodeName){var f=d.dom.getParent(e,"table"),g=e.getAttribute("data-mce-index"),h=a.control.parent().rel;if(g!=this.lastPos){if(g=g.split(","),g[0]=parseInt(g[0],10),g[1]=parseInt(g[1],10),a.control.isRtl()||"tl-tr"==h){for(c=9;c>=0;c--)for(b=0;10>b;b++)d.dom.toggleClass(f.rows[c].childNodes[b].firstChild,"mce-active",b>=g[0]&&c<=g[1]);g[0]=9-g[0],f.nextSibling.innerHTML=g[0]+" x "+(g[1]+1)}else{for(c=0;10>c;c++)for(b=0;10>b;b++)d.dom.toggleClass(f.rows[c].childNodes[b].firstChild,"mce-active",b<=g[0]&&c<=g[1]);f.nextSibling.innerHTML=g[0]+1+" x "+(g[1]+1)}this.lastPos=g}}},onclick:function(a){"A"==a.target.nodeName&&this.lastPos&&(a.preventDefault(),t(this.lastPos[0]+1,this.lastPos[1]+1),this.parent().cancel())}}]}),d.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:v,onclick:m}),d.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"}),d.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:s("mceTableCellProps"),onPostRender:w},{text:"Merge cells",onclick:s("mceTableMergeCells"),onPostRender:w},{text:"Split cell",onclick:s("mceTableSplitCells"),onPostRender:w}]}),d.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:s("mceTableInsertRowBefore"),onPostRender:w},{text:"Insert row after",onclick:s("mceTableInsertRowAfter"),onPostRender:w},{text:"Delete row",onclick:s("mceTableDeleteRow"),onPostRender:w},{text:"Row properties",onclick:s("mceTableRowProps"),onPostRender:w},{text:"-"},{text:"Cut row",onclick:s("mceTableCutRow"),onPostRender:w},{text:"Copy row",onclick:s("mceTableCopyRow"),onPostRender:w},{text:"Paste row before",onclick:s("mceTablePasteRowBefore"),onPostRender:w},{text:"Paste row after",onclick:s("mceTablePasteRowAfter"),onPostRender:w}]}),d.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:s("mceTableInsertColBefore"),onPostRender:w},{text:"Insert column after",onclick:s("mceTableInsertColAfter"),onPostRender:w},{text:"Delete column",onclick:s("mceTableDeleteCol"),onPostRender:w}]});var y=[];h("inserttable tableprops deletetable | cell row column".split(" "),function(a){"|"==a?y.push({text:"-"}):y.push(d.menuItems[a])}),d.addButton("table",{type:"menubutton",title:"Table",menu:y}),f.isIE||d.on("click",function(a){a=a.target,"TABLE"===a.nodeName&&(d.selection.select(a),d.nodeChanged())}),i.quirks=new b(d),d.on("Init",function(){e=d.windowManager,i.cellSelection=new c(d)}),h({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var b,c,e;e=d.dom.getParent(d.selection.getStart(),"th,td"),e&&(b=e.rowSpan,c=e.colSpan),d.dom.select("td.mce-item-selected,th.mce-item-selected").length?a.merge():n(a,e)},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){g=a.cutRows()},mceTableCopyRow:function(a){g=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(g,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(g)},mceTableDelete:function(a){a.deleteTable()}},function(b,c){d.addCommand(c,function(){var c=new a(d);c&&(b(c),d.execCommand("mceRepaint"),i.cellSelection.clear())})}),h({mceInsertTable:function(){m()},mceTableRowProps:r,mceTableCellProps:q},function(a,b){d.addCommand(b,function(b,c){a(c)})})}var h=d.each;g.add("table",i)}),h(["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Plugin"])}(this);